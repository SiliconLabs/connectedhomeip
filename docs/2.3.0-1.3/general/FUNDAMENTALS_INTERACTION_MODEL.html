<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Matter Interaction Model &mdash; Matter 2.3.0-1.3 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom_styles.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=cdec6f82"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Commissioning" href="COMMISSIONING.html" />
    <link rel="prev" title="The Matter Data Model" href="FUNDAMENTALS_DATA_MODEL.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #3b82f6" >

          
          
          <a href="../index.html" class="icon icon-home">
            Matter
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.3.0-1.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../OVERVIEW.html">User's Guide Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NEW_FEATURES.html">Matter New Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nav_1_overview.html">Matter Overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="FUNDAMENTALS_INTRO.html">Introduction to Matter</a></li>
<li class="toctree-l2"><a class="reference internal" href="FUNDAMENTALS_DATA_MODEL.html">The Matter Data Model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">The Matter Interaction Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-read-interaction">The Read Interaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-write-interaction">The Write Interaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#invoke-interaction">Invoke Interaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#subscription-interaction">Subscription Interaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relating-matter-to-zigbee">Relating Matter to Zigbee</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matter-specifications">Matter Specifications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="COMMISSIONING.html">Commissioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="SECURITY.html">Matter Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="MATTER_ICD.html">Matter Intermittently Connected Devices (ICD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="OTA_BOOTLOADER.html">Creating Gecko Bootloader for Use in Matter OTA Software Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="OTA_SOFTWARE_UPDATE.html">Matter Software Update with Silicon Labs Example Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nav_2_prereq.html">Matter Development Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_4_thread.html">Matter Over Thread</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_5_wifi.html">Matter Over Wi-Fi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_7_prod_guide.html">Matter Production Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unify/index.html">Unify Matter Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_3_general.html">Developer Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_6_faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #3b82f6" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Matter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../nav_1_overview.html">Matter Overview</a></li>
      <li class="breadcrumb-item active">The Matter Interaction Model</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/general/FUNDAMENTALS_INTERACTION_MODEL.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="the-matter-interaction-model">
<h1>The Matter Interaction Model<a class="headerlink" href="#the-matter-interaction-model" title="Link to this heading"></a></h1>
<p>The Matter Device Interaction Model (IM) defines the methods of communication between nodes, and serves as the common language for node-to-node information transmission.</p>
<p>Nodes communicate with each other through interactions. Interactions are a sequence of transaction(s), which in turn are a sequence of actions.</p>
<p>For example, in a Read Interaction, a client cluster can initiate a Read Transaction, where the client can request to read an attribute and a server cluster can respond by reporting the attribute. Both the client request and the server response are separate actions, but they are part of the same Read Transaction, which the Read Interaction encompasses.</p>
<p><img alt="Interaction structure overview" src="../_images/interaction-structure.jpg" /></p>
<p>The Interaction Model supports four types of interactions:</p>
<ul class="simple">
<li><p><strong>Read</strong></p></li>
<li><p><strong>Write</strong></p></li>
<li><p><strong>Invoke</strong></p></li>
<li><p><strong>Subscribe</strong></p></li>
</ul>
<p>All interaction types except Subscribe consist of one transaction. The Interaction Model supports five types of transactions:</p>
<ul class="simple">
<li><p><strong>Read</strong> - Get attributes and/or events from a server.</p></li>
<li><p><strong>Write</strong> - Modify attribute values.</p></li>
<li><p><strong>Invoke</strong> - Invoke cluster commands.</p></li>
<li><p><strong>Subscribe</strong> - Create subscription for clients to receive periodic updates from servers automatically.</p></li>
<li><p><strong>Report</strong> - Maintain the subscription for the Subscribe Interaction.</p></li>
</ul>
<p>The following concepts are important for understanding transactions.</p>
<ul>
<li><p><strong>Initiators and Targets</strong> - Interactions happen between an initiator node and target node(s). The initiator starts the transaction, and the target responds to the initiator’s action. More specifically, the transaction is usually between a client cluster on the initiator node and a server cluster on the target node.</p></li>
<li><p><strong>Transaction ID</strong> - The transaction ID field must be present in all actions that are part of a transaction to indicate the logical grouping of the actions as part of one transaction. All actions that are part of the same transaction must have the same transaction ID.</p></li>
<li><p><strong>Groups</strong> - Groups of devices allow an initiator to send an action to multiple targets. This group-level communication is known as a groupcast, which leverages Ipv6 multicast messages.</p></li>
<li><p><strong>Paths</strong> - Paths are the location of the attribute, event, or command an interaction seeks to access. Examples of path assembly:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span> <span class="pre">=</span> <span class="pre">&lt;node&gt;</span> <span class="pre">&lt;endpoint&gt;</span> <span class="pre">&lt;cluster&gt;</span> <span class="pre">&lt;attribute</span> <span class="pre">/</span> <span class="pre">event</span> <span class="pre">/</span> <span class="pre">command&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span> <span class="pre">=</span> <span class="pre">&lt;group</span> <span class="pre">ID&gt;</span> <span class="pre">&lt;attribute</span> <span class="pre">/</span> <span class="pre">event</span> <span class="pre">/</span> <span class="pre">command&gt;</span></code></p></li>
</ul>
<p>When groupcasting, a path may include the group or a wildcard operator to address several nodes simultaneously, decreasing the number of actions required and thus decreasing the response time of an interaction. Without groupcasting, humans may perceive latency between multiple devices reacting to an interaction. For example, when turning off a strip of lights, a path would include the group containing all the lights instead of turning off each light individually.</p>
</li>
</ul>
<p>The following sections review each of the four interaction types and their constituent transactions and actions.</p>
<section id="the-read-interaction">
<h2>The Read Interaction<a class="headerlink" href="#the-read-interaction" title="Link to this heading"></a></h2>
<p><img alt="Diagram of a Read Interaction" src="../_images/read-interaction.jpg" /></p>
<p>An initiator starts a Read Interaction when it wants to determine the value of one or more of a target node’s attributes or events. The following steps occur:</p>
<ol class="arabic simple">
<li><p><strong>Read Request Action</strong> - Requests a list of the target’s attributes and/or events, along with paths to each</p></li>
<li><p><strong>Report Data Action</strong> - Generated in response to the Read Request Action. Target sends back the requested list of attributes and/or events, a suppress response, and a subscription ID.</p>
<ol class="arabic simple">
<li><p>Suppress response: Flag that indicates whether the status response should be sent or withheld.</p></li>
<li><p>Subscription ID: Integer that identifies the subscription transaction, only included if the report is part of a Subscription Transaction.</p></li>
</ol>
</li>
<li><p><strong>Status Response Action</strong> (OPTIONAL) - Generates a Status Response by default; however, not sent if the suppress response flag is set. Ends transaction once the initiator sends the Status Response or receives a Report Data with the suppress flag set.</p></li>
</ol>
<p>Read Transactions are restricted to unicast only. This means that the Read Request and Report Data actions cannot target groups of nodes, whereas the Status Response Action cannot be generated as a response to a groupcast.</p>
</section>
<section id="the-write-interaction">
<h2>The Write Interaction<a class="headerlink" href="#the-write-interaction" title="Link to this heading"></a></h2>
<p><img alt="Diagram of Timed Write Interaction" src="../_images/timed-write-interaction.jpg" /></p>
<p>An initiator modifies a target’s attributes through a Write Interaction, which consists of either a Timed or Untimed Write Transaction.</p>
<p>An untimed transaction remains open to the receiver for an indefinite period, whereas a timed transaction establishes a maximum period (usually a few seconds) to receive a return action.</p>
<section id="timed-transactions-and-security">
<h3>Timed Transactions and Security<a class="headerlink" href="#timed-transactions-and-security" title="Link to this heading"></a></h3>
<p>Timed transactions are mainly used for devices such as doors or locks because they protect assets and thus are a greater target for intercept attacks. To understand why timed transactions are effective it is important to understand the nature of intercept attacks:</p>
<ol class="arabic simple">
<li><p>The initiator node sends an initial message directed to the target node.</p></li>
<li><p>An attacker intercepts the message and holds it, preventing the message from reaching the target.</p></li>
<li><p>Since the initiator did not receive a message back from the target, the initiator sends another message.</p></li>
<li><p>The attacker intercepts this second message and sends the first message to the target, keeping the second message for later use.</p></li>
<li><p>The target receives the first message as if it were arriving from the initiator node, sending a confirmation response to the initiator node and, unknowingly, the attacker.</p></li>
</ol>
<p>The problem lies in the second message; since the target never received the second message, the attacker now has a valid message to use at its convenience. The message may elicit a response from the target node such as “unlock” or “open door,” which means that the network now has a breach in security. By establishing a maximum period to receive a message back, a timed transaction effectively guards against intercept attacks. The attacker can no longer hold a message to use at its convenience, as the message will expire after a set time.</p>
<p>Although timed transactions are important in guarding against attacks, they increase the complexity of a network since they need more actions. Therefore, they are only recommended for use on transactions that give access to valuable information.</p>
</section>
<section id="timed-write-transactions">
<h3>Timed Write Transactions<a class="headerlink" href="#timed-write-transactions" title="Link to this heading"></a></h3>
<p>A Timed Write Transaction consists of the following sequence of actions:</p>
<ol class="arabic">
<li><p><strong>Timed Request Action</strong> - Sets the time interval to send a Write Request Action.</p></li>
<li><p><strong>Status Response Action</strong> - Confirms the transaction and time interval.</p></li>
<li><p><strong>Write Request Action</strong> - Requests three items:</p>
<ol class="arabic simple">
<li><p>List of tuples (each tuple is called a write request) containing the path and data to be modified.</p></li>
<li><p>Timed request flag indicating if the transaction is timed.</p></li>
<li><p>Suppress response flag.</p></li>
</ol>
<p>If the transaction is timed and a timed request flag is set, the initiator must also send a timeout: the number of milliseconds the transaction remains open, during which the next action to be received is still valid.</p>
</li>
<li><p><strong>Write Response Action (OPTIONAL)</strong> - A list of paths or error codes for every write request. Like a Read Transaction Status Response, a Write Response is not sent if the suppress response flag is set.</p></li>
</ol>
</section>
<section id="untimed-write-transactions">
<h3>Untimed Write Transactions<a class="headerlink" href="#untimed-write-transactions" title="Link to this heading"></a></h3>
<p>An Untimed Write Transaction requires only the Write Request Action and the Write Response Action Timed Write Transaction since there is no time interval that needs to be set or confirmed.</p>
</section>
<section id="write-transaction-restrictions">
<h3>Write Transaction Restrictions<a class="headerlink" href="#write-transaction-restrictions" title="Link to this heading"></a></h3>
<p>Untimed and timed Write Transactions differ in their restrictions. All actions in timed transactions are unicast-only, whereas Untimed Write Request Actions may be multicast but require the Suppress Response flag to be set to prevent the network from flooding with status responses.</p>
</section>
</section>
<section id="invoke-interaction">
<h2>Invoke Interaction<a class="headerlink" href="#invoke-interaction" title="Link to this heading"></a></h2>
<p><img alt="Diagram of a Timed Invoke Interaction" src="../_images/timed-invoke-interaction.jpg" /></p>
<p>An initiator invokes command(s) on a target’s cluster(s) through Invoke Interactions. An Invoke Interaction consists of either a Timed or Untimed Invoke Transaction, just like a Write Interaction consists of a Timed or Untimed Write Transaction.</p>
<p>Just like a Timed Write Transaction, a Timed Invoke Transaction consists of the following steps:</p>
<ol class="arabic">
<li><p><strong>Timed Request Action</strong> - Sets the time interval to send a Write Request Action.</p></li>
<li><p><strong>Status Response Action</strong> - Confirms the transaction and time interval.</p></li>
<li><p><strong>Invoke Request Action</strong> - Requests four items:</p>
<ol class="arabic simple">
<li><p>List of paths to cluster commands (each item in the list is an invoke command which may optionally contain argument(s) for the command).</p></li>
<li><p>Timed request flag.</p></li>
<li><p>Suppress response flag.</p></li>
<li><p>Interaction ID: Integer to match the Invoke Request to its corresponding Invoke Response.</p></li>
</ol>
<p>An Invoke Request initiating a timed Invoke Transaction must also send a timeout just like a timed Write Transaction.</p>
</li>
<li><p><strong>Invoke Response (OPTIONAL)</strong> - Target responds by sending back the interaction ID and a list of invoke responses: command responses and statuses for each invoke request. Like a Write Response, an Invoke Response is not sent if the suppress response flag is set</p></li>
</ol>
<p>Untimed and timed Invoke Transactions differ in the same way that untimed and timed Write Transactions differ, both in their actions and restrictions on unicast or multicast.</p>
</section>
<section id="subscription-interaction">
<h2>Subscription Interaction<a class="headerlink" href="#subscription-interaction" title="Link to this heading"></a></h2>
<p><img alt="Diagram of a Subscription Interaction" src="../_images/subscription-interaction.jpg" /></p>
<p>An initiator uses a Subscription Interaction to automatically receive periodic Report Data Transactions from the target. This creates a relationship between the initiator and target, which are referred to respectively as the subscriber and publisher after the subscription has been made.</p>
<p>Subscription Interactions include two transactions types: A Subscribe Transaction and Report Transaction.</p>
<section id="subscribe-transaction">
<h3>Subscribe Transaction<a class="headerlink" href="#subscribe-transaction" title="Link to this heading"></a></h3>
<p>The Subscribe Transaction is as follows:</p>
<ol class="arabic simple">
<li><p><strong>Subscribe Request Action</strong> - Requests three items:</p>
<ol class="arabic simple">
<li><p>Min interval floor (minimum interval between Data Reports).</p></li>
<li><p>Max interval ceiling (maximum interval between Data Reports).</p></li>
<li><p>Request for attributes and/or events to be reported.</p></li>
</ol>
</li>
<li><p><strong>Subscribe Request Action</strong> - A Report Data Action containing the first batch of data, known as the Primed Published Data.</p></li>
<li><p><strong>Status Response Action</strong> - Acknowledges the Report Data Action.</p></li>
<li><p><strong>Subscribe Response Action</strong> - Finalizes the subscription ID (an integer that acts as an identifier for the subscription) and the min interval floor and max interval ceiling. Indicates a successful subscription between the subscriber and publisher.</p></li>
</ol>
</section>
<section id="report-transaction">
<h3>Report Transaction<a class="headerlink" href="#report-transaction" title="Link to this heading"></a></h3>
<p>After a successful subscription, Report Transactions are sent to the subscriber. There are two types of Report Transactions: non-empty and empty.</p>
<ol class="arabic simple">
<li><p><strong>Non-empty</strong></p>
<ol class="arabic simple">
<li><p>Report Data Action - Reports data and/or events with the SuppressResponse flag set to FALSE</p></li>
<li><p>Status Response - Indicates a successful report or an error, the latter of which ends the interaction</p></li>
</ol>
</li>
<li><p><strong>Empty</strong></p>
<ol class="arabic simple">
<li><p>Report Data Action - A report that has no data or events with the SuppressResponse flag set to TRUE, meaning no Status Response.</p></li>
</ol>
</li>
</ol>
</section>
<section id="subscription-interaction-restrictions">
<h3>Subscription Interaction Restrictions<a class="headerlink" href="#subscription-interaction-restrictions" title="Link to this heading"></a></h3>
<p>Subscription Interactions have a few restrictions.</p>
<ul class="simple">
<li><p>First, the Subscribe Request and Subscribe Response actions are unicast-only, meaning an initiator cannot subscribe to more than one target simultaneously.</p></li>
<li><p>Second, Report Data Actions in the same Subscription Interaction must have the same subscription ID.</p></li>
<li><p>Third, a subscription may be ended if the subscriber responds to a Report Data Action with an “INACTIVE_SUBSCRIPTION” status or if the subscriber does not receive a Report Data Action within the max interval ceiling. The latter connotes that the publisher may end a subscription by not sending Report Data Actions.</p></li>
</ul>
</section>
</section>
<section id="relating-matter-to-zigbee">
<h2>Relating Matter to Zigbee<a class="headerlink" href="#relating-matter-to-zigbee" title="Link to this heading"></a></h2>
<p>The Matter Interaction Model originates from Chapter 2 in the Zigbee Cluster Library found here: <a class="reference external" href="https://groups.csa-iot.org/wg/members-all/document/23019">https://groups.csa-iot.org/wg/members-all/document/23019</a>; the Interaction model extends this by abstracting interactions from other layers (security, transport, message format, encoding). The Interaction Model fills in gaps in the Zigbee Cluster Library identified by the Matter Data Model Tiger Team, adding Multi-Element Message support, Synchronized Reporting, reduce message types in commands and actions, complex data type support in all messages, Events, and interception attack.</p>
</section>
<section id="matter-specifications">
<h2>Matter Specifications<a class="headerlink" href="#matter-specifications" title="Link to this heading"></a></h2>
<p>More information on the Matter Interaction Model can be found in Chapter 8 of Matter Core Specifications <a class="reference external" href="https://csa-iot.org/developer-resource/specifications-download-request/">Specifications Download Request - CSA-IOT</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer>
    <hr/>
    <p>Copyright © 2023 Silicon Laboratories. All rights reserved.</p>
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>