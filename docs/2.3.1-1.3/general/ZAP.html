

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZCL Advanced Platform (ZAP) Tool for Matter &mdash; Matter 2.3.1-1.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom_styles.css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
      <script src="../_static/doctools.js"></script>
      <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using Wireshark to Capture Network Traffic in Matter" href="WIRESHARK.html" />
    <link rel="prev" title="How to Flash a SiWx917 SoC Device" href="FLASH_SILABS_SiWx917_SOC_DEVICE.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #3b82f6" >

          
          
          <a href="../index.html" class="icon icon-home">
            Matter
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../OVERVIEW.html">User's Guide Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NEW_FEATURES.html">Matter New Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_1_overview.html">Matter Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_2_prereq.html">Matter Development Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_4_thread.html">Matter Over Thread</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_5_wifi.html">Matter Over Wi-Fi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_7_prod_guide.html">Matter Production Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unify/index.html">Unify Matter Solutions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nav_3_general.html">Developer Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="CODE_SIZE_SAVINGS.html">Code Savings Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="COMMIT_HASHES.html">Commit Hash Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="VERSIONING_AND_MAINTENANCE.html">Versioning and Release Maintenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="CUSTOM_MATTER_DEVICE.html">Custom Matter Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="FIND_RASPI.html">Find Your Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="FLASHING_USING_COMMANDER.html">Flashing Using Simplicity Commander</a></li>
<li class="toctree-l2"><a class="reference internal" href="FLASH_SILABS_DEVICE.html">Flash an EFR32 Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="FLASH_SILABS_SiWx917_SOC_DEVICE.html">Flash a 917SoC Device</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using ZAP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clusters">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zap-tool">ZAP Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generation-of-code">Generation of Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-tutorial-button">New Tutorial Button</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-zcl-device-types-per-endpoint">Multiple ZCL Device Types per Endpoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining-a-custom-cluster">Defining a Custom Cluster</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="WIRESHARK.html">Using Wireshark</a></li>
<li class="toctree-l2"><a class="reference internal" href="EP.html">Using Energy Profiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="GATT.html">BLE GATT Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="PINTOOL.html">Hardware Pin Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="SMG_TO_SLC_GUIDE.html">SMG to Matter Extension Project Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/vscode/index.html">VS Code Development</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nav_6_faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #3b82f6" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Matter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../nav_3_general.html">Developer Reference</a></li>
      <li class="breadcrumb-item active">ZCL Advanced Platform (ZAP) Tool for Matter</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/general/ZAP.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="zcl-advanced-platform-zap-tool-for-matter">
<h1>ZCL Advanced Platform (ZAP) Tool for Matter<a class="headerlink" href="#zcl-advanced-platform-zap-tool-for-matter" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>EFR32 example applications provide a baseline demonstration of a lock device,
built using the Matter SDK and the Silicon Labs GeckoSDK. It can be controlled
by a CHIP controller over OpenThread network.</p>
<p>The EFR32 device can be commissioned over Bluetooth Low Energy (BLE) where the
device and the CHIP controller will exchange security information with the
Rendez-vous procedure. Thread Network credentials are provided to the EFR32
device which will then join the network.</p>
<p>The LCD on the Silicon Labs WSTK shows a QR Code containing the needed
commissioning information for the BLE connection and starting the Rendez-vous
procedure.</p>
<p>The lock example is intended to serve both as a means to explore the workings of
CHIP, and a template for creating real products on the Silicon Labs platform.</p>
<p>Each Matter application consists of the following layers:</p>
<ul class="simple">
<li><p>Matter SDK: Source code necessary to communicate through the Matter network over Thread or Wi-Fi</p></li>
<li><p>Data model layer in the form of clusters. There are two types of clusters:</p>
<ul>
<li><p>Utility Clusters:</p>
<ul>
<li><p>They represent common management and diagnostic features of a Matter
endpoint</p></li>
<li><p>Identify cluster is an example of a Utility Cluster. Given a Node
ID, it can be used to Blink LED0 to the corresponding Silicon Labs WSTK</p></li>
</ul>
</li>
<li><p>Application Clusters:</p>
<ul>
<li><p>These clusters represent functionalities specific to a given
application</p></li>
<li><p>Door Lock Cluster is an example of an Application specific cluster.
This cluster contains commands to lock and unlock a door(door-lock is represented by an LED), with options to set passwords and lock schedules</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="clusters">
<h2>Clusters<a class="headerlink" href="#clusters" title="Permalink to this heading"></a></h2>
<p>Every Matter Application uses multiple clusters leveraged from the Zigbee
Cluster Library (ZCL). A cluster can be seen as a building block for the Data
Model of a Matter application. Clusters contains attributes, commands, and
events. Attributes are customizable variables specified by the Zigbee Advanced
Platform (ZAP) tool. Commands are sent to the application, which may respond with
data, LED flickering, lock actuation, etc. Events are notifications sent out by
the server.</p>
<p>An application can have multiple Matter endpoints. Application endpoints
generally refer to one device, and inherits its information from the “cluster”
it belongs to. Utility clusters are required to be on the endpoint with ID 0.
Application clusters are assigned to endpoints with IDs 1 and higher.</p>
<p>Some applications have callbacks that are left to be implemented by the device
manufacturer. For example, the storage and management of users and credentials in
the lock-app is left up to the application developer.</p>
</section>
<section id="zap-tool">
<h2>ZAP Tool<a class="headerlink" href="#zap-tool" title="Permalink to this heading"></a></h2>
<p>The ZAP tool is built and maintained by Silicon Labs and developers in the ZAP
open source community. It inherits its name and features from the Zigbee Cluster
Library, which was the starting point for the Matter data model. ZAP is used for
generating code for Matter applications based on the Zigbee Cluster Library and
associated Matter code templates.</p>
<p>The ZAP tool is no longer present as a submodule in the Matter repo. The ZAP tool
can be downloaded as a binary from GitHub or optionally you can clone the entire ZAP
repo and build the ZAP binary from scratch.</p>
<p>ZAP binaries can be downloaded from the latest ZAP release here:</p>
<p><code class="docutils literal notranslate"><span class="pre">https://github.com/project-chip/zap/releases/latest</span></code></p>
<p>Optionally, the ZAP tool can be cloned using the following git command. This will create a
root level zap folder in your current directory.</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/project-chip/zap.git</span></code></p>
<p>The ZAP tool can be invoked using the <code class="docutils literal notranslate"><span class="pre">run_zaptool.sh</span></code> script located in the Matter repo at
<code class="docutils literal notranslate"><span class="pre">./scripts/tools/zap/run_zaptool.sh</span></code>. Before you run this script you have to provide the location of the ZAP instance to be run. This is either the binary that you downloaded or
the binary that you built from scratch in the ZAP repo. You can do this by setting the <code class="docutils literal notranslate"><span class="pre">ZAP_INSTALL_PATH</span></code> environment variable
like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">export</span> <span class="pre">ZAP_INSTALL_PATH=(path</span> <span class="pre">to</span> <span class="pre">your</span> <span class="pre">instance</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">ZAP</span> <span class="pre">binary)</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">run_zaptool.sh</span></code> script can be invoked without arguments, or, you can
provide the path to a ZAP file to be opened upon launch.</p>
<p>In the following examples, the ZAP file for the lock-app has been chosen.</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">./scripts/tools/zap/run_zaptool.sh</span> <span class="pre">($PATH_TO_ZAP_FILE)</span></code></p>
<p>ZAP files for the various sample applications are included in the sample applications <code class="docutils literal notranslate"><span class="pre">data_model</span></code> directory such as</p>
<p><code class="docutils literal notranslate"><span class="pre">./examples/lighting-app/silabs/efr32/data_model/lighting-thread-app.zap</span></code>.</p>
<p>This shows the output of the <code class="docutils literal notranslate"><span class="pre">run_zaptool</span></code> script with no arguments. To load a new
zap file, click the application menu for Electron (Upper left corner of the
screen for macs), then click “Open File”. Then navigate to the desired .zap
file.</p>
<p><img alt="ZAP Introduction Page" src="../_images/zap_intro.png" /></p>
<p>This shows the output of the run_zaptool script with a zap file given as an
argument, or after a .zap file has been opened in the ZAP UI. An Electron
application will open, pre-loaded with the information from the .zap file
provided as a command line argument.</p>
<p><img alt="ZAP Endpoint" src="../_images/endpoint-0.png" /></p>
<p>The Out of the box (OOB) example lock application has 2 endpoints. Endpoint 0 is
called the root node. It contains all Service and Device management clusters. In
general, any cluster or feature that is not specific to a device type belongs in
Endpoint 0. Examples of clusters one might find in Endpoint 0: Device Descriptor
cluster, Network Diagnostics cluster.</p>
<p>Endpoint 1 contains information specific to the device type. Conveniently, the
ZAP tool offers a Door lock cluster, which contains Commands (lock, unlock, set
credential, and so on) and Attributes (Lock state, Require PIN) that a standard door
lock application might use.</p>
<p>More endpoints can be added. Each endpoint acts like a port on a network
interface.</p>
<p>Endpoints contain clusters which are bundles of device functionality. Clusters
have both a Client and a Server interface. In general the Client interface sends
commands and the Server interface receives them. For instance a Light would
implement the Server side of the on/off clusters. A Switch would implement the
Client side of the same cluster.</p>
<p>Click on Endpoint 1 on the left hand side of the application. The door lock
cluster should already be enabled as “Server”.</p>
<p><img alt="ZAP Endpoint 1" src="../_images/endpoint-1.png" /></p>
</section>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this heading"></a></h2>
<p>Attributes are analogous to member variables of a class. Each attribute is
provided with generated setter/getter code from the ZAP tool. They can be
enabled or disabled for each cluster on a Matter endpoint. Some attributes are
required to be enabled, else the application will not function properly. There
is an option to add attributes to either the server code or client code. The ZAP
tool also allows you choose a storage space for attributes. Attributes can be
stored in standard RAM, Non-volatile memory or external memory. Each attribute
has a type, some are standard C types and some have specially defined enums.
Each attribute can be provided with a default starting value value.</p>
<p>Click the settings wheel to enable/disable, choose a storage option, and choose
a default value for attributes, commands and events for Endpoint 1.</p>
<p><img alt="ZAP Attributes" src="../_images/door-lock-attributes.png" /></p>
</section>
<section id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this heading"></a></h2>
<p>Commands can be enabled/disabled like attributes. Some commands are required for
an application to function properly. Many of the functions run when a command is
received are implemented on the server side. But some of these are left up to
the application to define. In the EFR32 lock example, the set/get user and
credential functions are customizable as each implementation of a lock might
store these differently.</p>
<p><img alt="ZAP Commands" src="../_images/door-lock-commands.png" /></p>
</section>
<section id="generation-of-code">
<h2>Generation of Code<a class="headerlink" href="#generation-of-code" title="Permalink to this heading"></a></h2>
<p>Once you have chosen the cluster options, save the current ZAP configuration using the application menu in the upper left corner.</p>
<p>Before v1.1.0-1.1, you needed to click the <strong>Generate</strong> button for the code to be generated. Now, the code is generated automatically in the save function. You will be prompted to choose a save location for the generated ZAP code. In the Silicon Labs Matter repository, the lock-app generated files belong in matter/zzz_generated/lock-app/zap-generated.</p>
</section>
<section id="new-tutorial-button">
<h2>New Tutorial Button<a class="headerlink" href="#new-tutorial-button" title="Permalink to this heading"></a></h2>
<p>This new feature helps you understand all the steps needed to create a new endpoint.</p>
<p>Click the <strong>Tutorial</strong> button at the top-right side, between the <strong>Preview</strong> and the <strong>Settings</strong> buttons.</p>
<p>A pop-up displays with instructions for next steps.</p>
<p><img alt="Tutorial start page" src="../_images/tutorial1.png" /></p>
<p>These steps guide you on the components of this tool, the effects of each component, and the points you need to consider carefully when creating a new endpoint.</p>
<p><img alt="Tutorial end page" src="../_images/tutorial2.png" /></p>
<p>At the final step, a notification asks if you want to keep the endpoint you just created. Select what you want to finish the tutorial.</p>
</section>
<section id="multiple-zcl-device-types-per-endpoint">
<h2>Multiple ZCL Device Types per Endpoint<a class="headerlink" href="#multiple-zcl-device-types-per-endpoint" title="Permalink to this heading"></a></h2>
<p>This is a new Matter-only feature where you can select more than one ZCL device type per endpoint. The addition of multiple device types will add the cluster configurations within the device types to the endpoint configuration.</p>
<p>You can select multiple ZCL device types per endpoint, but there is only one <strong>Primary Device</strong> as in the below image.</p>
<p><img alt="Edit endpoint" src="../_images/edit-endpoint.png" /></p>
<p>The image above shows that endpoint 2 has more than one device type selected. The <strong>Primary Device</strong> denotes the primary device type that the endpoint will be associated with. The primary device type is always present at index 0 of the list of device types selected so selecting a different primary device type will change the ordering of the device types selected. The device type selections also have constraints based on the Data Model specification. ZAP protects you from choosing invalid combinations of device types on an endpoint using these constraints.</p>
<p><img alt="Multiple endpoints" src="../_images/multiple-endpoints.png" /></p>
<p>The image above is what the multiple device type endpoints looks like after configured. On the left-hand side, it shows the list of all clusters sequentially in order, and on the other side are clusters that are ready to be configured.</p>
</section>
<section id="defining-a-custom-cluster">
<h2>Defining a Custom Cluster<a class="headerlink" href="#defining-a-custom-cluster" title="Permalink to this heading"></a></h2>
<p>Create an XML file with custom cluster definitions, for an example see <a class="reference external" href="https://github.com/project-chip/connectedhomeip/blob/master/src/app/zap-templates/zcl/data-model/chip/sample-mei-cluster.xml">Sample MEI Cluster</a>. In ZAP click <strong>Extensions</strong> and add the XML file. The newly defined cluster can then be enabled in any endpoint under the domain for which it was defined (for example General), its Commands and Attributes can be managed like those of any other cluster.</p>
</section>
</section>


           </div>
          </div>
          <footer>
    <hr/>
    <p>Copyright © 2025 Silicon Laboratories. All rights reserved.</p>
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>