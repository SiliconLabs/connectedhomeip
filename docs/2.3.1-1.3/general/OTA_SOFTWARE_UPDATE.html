

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Matter Software Update with Silicon Labs Example Applications &mdash; Matter 2.3.1-1.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom_styles.css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
      <script src="../_static/doctools.js"></script>
      <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Matter Development Prerequisites" href="../nav_2_prereq.html" />
    <link rel="prev" title="Creating Gecko Bootloader for Use in Matter OTA Software Update" href="OTA_BOOTLOADER.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #3b82f6" >

          
          
          <a href="../index.html" class="icon icon-home">
            Matter
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../OVERVIEW.html">User's Guide Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NEW_FEATURES.html">Matter New Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nav_1_overview.html">Matter Overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="FUNDAMENTALS_INTRO.html">Introduction to Matter</a></li>
<li class="toctree-l2"><a class="reference internal" href="FUNDAMENTALS_DATA_MODEL.html">The Matter Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="FUNDAMENTALS_INTERACTION_MODEL.html">The Matter Interaction Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="COMMISSIONING.html">Commissioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="SECURITY.html">Matter Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="MATTER_ICD.html">Matter Intermittently Connected Devices (ICD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="OTA_BOOTLOADER.html">Creating Gecko Bootloader for Use in Matter OTA Software Update</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Matter Software Update with Silicon Labs Example Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hardware-requirements">Hardware Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#software-requirements">Software Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-ota-environment">Setting up OTA Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matter-ota-application-images">Matter OTA Application Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-ota-download-scenario">Running the OTA Download Scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multi-chip-ota-images">Multi-Chip OTA Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-info">Additional Info</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nav_2_prereq.html">Matter Development Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_4_thread.html">Matter Over Thread</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_5_wifi.html">Matter Over Wi-Fi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_7_prod_guide.html">Matter Production Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unify/index.html">Unify Matter Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_3_general.html">Developer Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_6_faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #3b82f6" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Matter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../nav_1_overview.html">Matter Overview</a></li>
      <li class="breadcrumb-item active">Matter Software Update with Silicon Labs Example Applications</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/general/OTA_SOFTWARE_UPDATE.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="matter-software-update-with-silicon-labs-example-applications">
<h1>Matter Software Update with Silicon Labs Example Applications<a class="headerlink" href="#matter-software-update-with-silicon-labs-example-applications" title="Permalink to this heading"></a></h1>
<p>This page outlines the steps for a scenario that demonstrates the Over
The Air (OTA) Software Update functionality of Matter.</p>
<p>Over The Air (OTA) Software Update functionality is enabled by default for
all Silicon Labs example applications.</p>
<section id="hardware-requirements">
<h2>Hardware Requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>To run matter ota on Silicon Labs Platform, refer to: <a class="reference internal" href="HARDWARE_REQUIREMENTS.html"><span class="std std-doc">Hardware Requirements</span></a></p></li>
</ul>
</section>
<section id="software-requirements">
<h2>Software Requirements<a class="headerlink" href="#software-requirements" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>To run matter ota on Silicon Labs Platform, refer to: <a class="reference internal" href="SOFTWARE_REQUIREMENTS.html"><span class="std std-doc">Software Requirements</span></a></p></li>
</ul>
</section>
<section id="setting-up-ota-environment">
<h2>Setting up OTA Environment<a class="headerlink" href="#setting-up-ota-environment" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>OTA-A</strong>, the running image: a regular application built with the default/older software version value. This application will be updated to the one with a higher software version. In the OTA Software Update process it acts as the OTA Requestor.</p></li>
<li><p><strong>OTA-B</strong>, the update image: a regular application built with a higher software version value.</p></li>
<li><p><strong>Chip-tool</strong>: the controller that announces the OTA-Provider’s address to the application thus triggering the OTA Software Update.</p></li>
<li><p><strong>OTA-Provider</strong>: the server that carries the update image and from which the OTA Requestor will download the updated software.</p></li>
<li><p><strong>Bootloader</strong>: Silicon Labs Gecko Bootloader image that supports OTA; supports the external (SPI-flash) or the internal storage option.</p></li>
</ul>
<section id="setting-up-chip-tool">
<h3>Setting up Chip-tool<a class="headerlink" href="#setting-up-chip-tool" title="Permalink to this heading"></a></h3>
<p>The chip-tool binary is a part of the Silicon Labs’ Matter Hub Raspberry Pi Image available as a part of the Release Artifacts page. If you are planning to run chip-tool on the Matter Hub you may skip the rest of this section.</p>
<p>If you have not downloaded or cloned this repository, you can run the following
commands on a Linux terminal running on either Linux machine, WSL or Virtual
Machine to clone the repository and run bootstrap to prepare to build the sample
application images.</p>
<ol class="arabic">
<li><p>To download the <a class="reference external" href="https://github.com/SiliconLabs/matter.git">SiliconLabs Matter codebase</a>, run the following commands.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/SiliconLabs/matter.git
</pre></div>
</div>
</li>
<li><p>Bootstrapping:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>matter
$<span class="w"> </span>./scripts/checkout_submodules.py<span class="w"> </span>--shallow<span class="w"> </span>--recursive<span class="w"> </span>--platform<span class="w"> </span>silabs
$<span class="w"> </span>.<span class="w"> </span>scripts/bootstrap.sh
<span class="c1"># Create a directory where binaries will be updated/compiled called `out`</span>
$<span class="w"> </span>mkdir<span class="w"> </span>out
</pre></div>
</div>
<p>To control the  Matter application you will have to compile and run the chip-tool on either a Linux, Mac, or Raspberry Pi. The chip-tool builds faster on the Mac and Linux machines so that is recommended, but if you have access to a Raspberry Pi that will work as well.</p>
</li>
<li><p>Build the chip-tool</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./scripts/examples/gn_build_example.sh<span class="w"> </span>examples/chip-tool<span class="w"> </span>out/standalone
</pre></div>
</div>
</li>
</ol>
<p>This will build chip-tool in <code class="docutils literal notranslate"><span class="pre">out/standalone</span></code>.</p>
</section>
<section id="setting-up-ota-provider">
<h3>Setting up OTA-Provider<a class="headerlink" href="#setting-up-ota-provider" title="Permalink to this heading"></a></h3>
<p>The chip-ota-provider-app binary for a Raspberry Pi is a part of the Artifacts package available with the Matter Extension release. If you are planning to run the OTA-Provider on a Raspberry Pi there is no need to build it.</p>
<ul class="simple">
<li><p>To Build OTA-Provider app for Linux Platform, run below command in the matter repository.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>scripts/examples/gn_build_example.sh<span class="w"> </span>examples/ota-provider-app/linux<span class="w"> </span>out/debug<span class="w"> </span><span class="nv">chip_config_network_layer_ble</span><span class="o">=</span><span class="nb">false</span>
</pre></div>
</div>
</section>
</section>
<section id="matter-ota-application-images">
<h2>Matter OTA Application Images<a class="headerlink" href="#matter-ota-application-images" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>To create and Build matter OTA from matter code, need two different applications to build mentioned below:</p>
<ul>
<li><p>OTA A</p></li>
<li><p>OTA B</p></li>
</ul>
</li>
</ul>
<section id="build-ota-a-application">
<h3>Build OTA A Application<a class="headerlink" href="#build-ota-a-application" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Matter OTA-A Application will be used to flash on the matter device.</p></li>
<li><p>In matter cloned directory run below commands to build an OTA A application.</p>
<p>For RS9116:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gn_silabs_example</span><span class="p">.</span><span class="n">sh</span><span class="w"> </span><span class="n">examples</span><span class="o">/</span><span class="n">lighting</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">silabs</span><span class="o">/</span><span class="w"> </span><span class="n">out</span><span class="o">/</span><span class="n">rs911x_lighting_A</span><span class="w"> </span><span class="n">BRD41xxx</span><span class="w"> </span><span class="n">disable_lcd</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="n">use_external_flash</span><span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="n">chip_enable_ble_rs911x</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="o">--</span><span class="n">wifi</span><span class="w"> </span><span class="n">rs9116</span>
</pre></div>
</div>
<p>For WF200:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gn_silabs_example</span><span class="p">.</span><span class="n">sh</span><span class="w"> </span><span class="n">examples</span><span class="o">/</span><span class="n">lighting</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">silabs</span><span class="o">/</span><span class="w"> </span><span class="n">out</span><span class="o">/</span><span class="n">wf200_lighting_A</span><span class="w"> </span><span class="n">BRD41xxx</span><span class="w"> </span><span class="n">chip_build_libshell</span><span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="o">--</span><span class="n">wifi</span><span class="w"> </span><span class="n">wf200</span>
</pre></div>
</div>
<p>For SiWx917 NCP:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gn_silabs_example</span><span class="p">.</span><span class="n">sh</span><span class="w"> </span><span class="n">examples</span><span class="o">/</span><span class="n">lighting</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">silabs</span><span class="o">/</span><span class="w"> </span><span class="n">out</span><span class="o">/</span><span class="n">siwx917_lighting</span><span class="w"> </span><span class="n">BRD41xxx</span><span class="w"> </span><span class="n">disable_lcd</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="n">use_external_flash</span><span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="o">--</span><span class="n">wifi</span><span class="w"> </span><span class="n">SiWx917</span>
</pre></div>
</div>
<p>For SiWx917 SOC:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gn_silabs_example</span><span class="p">.</span><span class="n">sh</span><span class="w"> </span><span class="n">examples</span><span class="o">/</span><span class="n">lighting</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">silabs</span><span class="o">/</span><span class="w"> </span><span class="n">out</span><span class="o">/</span><span class="n">SiWx917_lighting</span><span class="w"> </span><span class="n">BRD4388A</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>Note:</strong> Matter OTA-A application will be having software version as 1 by default in <strong>third_party/silabs/BUILD.gn</strong> file.</p>
</section>
<section id="build-ota-b-application">
<h3>Build OTA B Application<a class="headerlink" href="#build-ota-b-application" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Matter OTA-B application will be used to create gbl &amp; OTA file.</p></li>
<li><p>Open the file <strong>third_party/silabs/BUILD.gn</strong> from matter code cloned directory and modify <strong>sl_matter_version = 1</strong> to any number.</p></li>
</ul>
<p><strong>Note:</strong> Make sure always <strong>sl_matter_version</strong> should be greater than <strong>sl_hardware_version</strong></p>
<ul class="simple">
<li><p>After Modifying software version build OTA B application using below commands:</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">For</span><span class="w"> </span><span class="n">RS9116</span><span class="o">:</span><span class="w"> </span>

<span class="p">.</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gn_silabs_example</span><span class="p">.</span><span class="n">sh</span><span class="w"> </span><span class="n">examples</span><span class="o">/</span><span class="n">lighting</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">silabs</span><span class="o">/</span><span class="w"> </span><span class="n">out</span><span class="o">/</span><span class="n">rs911x_lighting_B</span><span class="w"> </span><span class="n">BRD41xxx</span><span class="w"> </span><span class="n">use_external_flash</span><span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="n">chip_enable_ble_rs911x</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="o">--</span><span class="n">wifi</span><span class="w"> </span><span class="n">rs9116</span>

<span class="n">For</span><span class="w"> </span><span class="n">WF200</span>

<span class="p">.</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gn_silabs_example</span><span class="p">.</span><span class="n">sh</span><span class="w"> </span><span class="n">examples</span><span class="o">/</span><span class="n">lighting</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">silabs</span><span class="o">/</span><span class="w"> </span><span class="n">out</span><span class="o">/</span><span class="n">wf200_lighting_B</span><span class="w"> </span><span class="n">BRD41xxx</span><span class="w"> </span><span class="n">chip_build_libshell</span><span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="o">--</span><span class="n">wifi</span><span class="w"> </span><span class="n">wf200</span>

<span class="n">For</span><span class="w"> </span><span class="n">SiWx917</span><span class="w"> </span><span class="n">NCP</span>

<span class="p">.</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gn_silabs_example</span><span class="p">.</span><span class="n">sh</span><span class="w"> </span><span class="n">examples</span><span class="o">/</span><span class="n">lighting</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">silabs</span><span class="o">/</span><span class="w"> </span><span class="n">out</span><span class="o">/</span><span class="n">siwx917_lighting</span><span class="w"> </span><span class="n">BRD41xxx</span><span class="w"> </span><span class="n">disable_lcd</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="n">use_external_flash</span><span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="o">--</span><span class="n">wifi</span><span class="w"> </span><span class="n">SiWx917</span>

<span class="n">For</span><span class="w"> </span><span class="n">SiWx917</span><span class="w"> </span><span class="n">SOC</span>

<span class="p">.</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gn_silabs_example</span><span class="p">.</span><span class="n">sh</span><span class="w"> </span><span class="n">examples</span><span class="o">/</span><span class="n">lighting</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">silabs</span><span class="o">/</span><span class="w"> </span><span class="n">out</span><span class="o">/</span><span class="n">SiWx917_lighting</span><span class="w"> </span><span class="n">BRD4388A</span>
</pre></div>
</div>
</section>
</section>
<section id="running-the-ota-download-scenario">
<h2>Running the OTA Download Scenario<a class="headerlink" href="#running-the-ota-download-scenario" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Image will be created and uploaded onto Raspberry Pi which provides the firmware image chunk by chunk to the device.</p></li>
<li><p>Host will initiate the OTA download and provider app will start the OTA image transfer.</p></li>
<li><p>Host will receive combined image and host will transfer the firmware image on to the flash backup location chunk by chunk.</p></li>
<li><p>Once image is downloaded, the device will reboot into the downloaded image.</p></li>
</ul>
<section id="creation-of-gbl-and-ota-images">
<h3>Creation of GBL and OTA Images<a class="headerlink" href="#creation-of-gbl-and-ota-images" title="Permalink to this heading"></a></h3>
<section id="for-efr-ncp-devices">
<h4>For EFR NCP Devices<a class="headerlink" href="#for-efr-ncp-devices" title="Permalink to this heading"></a></h4>
<ul>
<li><p>Create a bootable image file (using the Lighting application image as an
example):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>commander<span class="w"> </span>gbl<span class="w"> </span>create<span class="w"> </span>chip-efr32-lighting-example.gbl<span class="w"> </span>--compress<span class="w"> </span>lzma<span class="w"> </span>--app<span class="w"> </span>chip-efr32-lighting-example.s37
</pre></div>
</div>
</li>
</ul>
<p><strong>Note</strong>:- Using LZMA compression when building the .gbl file ( passing <code class="docutils literal notranslate"><span class="pre">--compress</span> <span class="pre">lzma</span></code> parameter to the <code class="docutils literal notranslate"><span class="pre">commander</span> <span class="pre">gbl</span> <span class="pre">create</span></code> command) further reduces the downloaded image size.</p>
<ul>
<li><p>Create the Matter OTA file from the bootable image file:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>commander<span class="w"> </span>ota<span class="w"> </span>create<span class="w"> </span>--type<span class="w"> </span>matter<span class="w"> </span>--input<span class="w"> </span>chip-efr32-lighting-example.gbl<span class="w"> </span>--vendorid<span class="w"> </span>0xFFF1<span class="w"> </span>--productid<span class="w"> </span>0x8005<span class="w"> </span>--swstring<span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="w"> </span>--swversion<span class="w"> </span><span class="m">2</span><span class="w"> </span>--digest<span class="w"> </span>sha256<span class="w"> </span>-o<span class="w"> </span>chip-efr32-lighting-example.ota
</pre></div>
</div>
</li>
</ul>
</section>
<section id="for-siwx917-soc-devices">
<h4>For SiWx917 SoC Devices<a class="headerlink" href="#for-siwx917-soc-devices" title="Permalink to this heading"></a></h4>
<p>Storing a single Matter combined upgrade image(TA+M4) and transfer the image to the co-processor and rewrite the 917 firmware as well as M4 firmware Image then boot loading with the upgraded TA processor image and the M4 processor image.</p>
<p>Host will initiate OTA download to receive combined image (TA+M4) and store M4 and TA image on flash backup location.</p>
<section id="use-cases">
<h5>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this heading"></a></h5>
<ul class="simple">
<li><p>Combined image where TA and M4 images to be upgraded. M4 image also has the <strong>sl_matter_version</strong> modified with the latest version.</p></li>
<li><p>Only M4 image to be upgraded. M4 image also has the <strong>sl_matter_version</strong> modified with the latest version.</p></li>
<li><p>Only TA image to be upgraded. In this case, We need to have a M4 image with just <strong>sl_matter_version</strong> modified with the latest version. This would be similar to Combined image upgrade.</p></li>
</ul>
</section>
<section id="creation-of-ota-images">
<h5>Creation of OTA Images<a class="headerlink" href="#creation-of-ota-images" title="Permalink to this heading"></a></h5>
<ul class="simple">
<li><p>The first step is to create a combined image that contains both the firmwares (TA &amp; M4).</p></li>
<li><p>This image is created by combining the binary images of both firmwares.</p></li>
<li><p>For the Matter OTA file, create a bootable image file with the .rps format (using the Lighting application image as an example) and then create the Matter OTA file from the bootable image file using commands provided below.</p></li>
<li><p>Once the .ota file is created, it will be uploaded onto the Raspberry Pi where the OTA provider application is running.</p></li>
</ul>
<section id="generating-the-combined-ota-image">
<h6>Generating The Combined OTA image<a class="headerlink" href="#generating-the-combined-ota-image" title="Permalink to this heading"></a></h6>
<ul>
<li><p>Create TA  image (.rps) with combined image flag set by using command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>commander<span class="w"> </span>rps<span class="w"> </span>convert<span class="w"> </span>&lt;ta_image_combined.rps&gt;<span class="w"> </span>--taapp<span class="w"> </span>&lt;ta_image.rps&gt;<span class="w"> </span>--combinedimage
</pre></div>
</div>
</li>
<li><p>Create M4 .rps file from .s37 using below command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>commander<span class="w"> </span>rps<span class="w"> </span>create<span class="w"> </span>&lt;m4_image.rps&gt;<span class="w"> </span>--app<span class="w"> </span>&lt;m4_image.s37&gt;
</pre></div>
</div>
</li>
<li><p>Create M4 (.rps) with combined image flag set by using command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>commander<span class="w"> </span>rps<span class="w"> </span>convert<span class="w"> </span>&lt;m4_image_combined.rps&gt;<span class="w"> </span>--app<span class="w"> </span>&lt;m4_image.rps&gt;<span class="w"> </span>--combinedimage
</pre></div>
</div>
</li>
<li><p>Create combined image from the above created TA and M4 images.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>commander<span class="w"> </span>rps<span class="w"> </span>convert<span class="w"> </span><span class="s2">&quot;combined_image.rps&quot;</span><span class="w"> </span>--app<span class="w"> </span><span class="s2">&quot;m4_image_combined.rps&quot;</span><span class="w"> </span>--taapp<span class="w"> </span><span class="s2">&quot;ta_image_combined.rps&quot;</span><span class="w"> </span>
</pre></div>
</div>
</li>
<li><p>Create the Matter OTA file from the bootable image file.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./src/app/ota_image_tool.py<span class="w"> </span>create<span class="w"> </span>-v<span class="w"> </span>0xFFF1<span class="w"> </span>-p<span class="w"> </span>0x8005<span class="w"> </span>-vn<span class="w"> </span><span class="m">2</span><span class="w"> </span>-vs<span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="w"> </span>-da<span class="w"> </span>sha256<span class="w"> </span>combined_image.rps<span class="w"> </span>combined_image.ota
</pre></div>
</div>
</li>
</ul>
<p><strong>Note:</strong> For TA(alone) OTA firmware upgrade, follow the same steps as above.</p>
</section>
<section id="generating-the-m4-ota-image">
<h6>Generating The M4 OTA image<a class="headerlink" href="#generating-the-m4-ota-image" title="Permalink to this heading"></a></h6>
<ul>
<li><p>Create M4 (.s37) image to  (.rps) image using below command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>commander<span class="w"> </span>rps<span class="w"> </span>create<span class="w"> </span>&lt;m4_image.rps&gt;<span class="w"> </span>--app<span class="w"> </span>&lt;m4_image.s37&gt;
</pre></div>
</div>
</li>
<li><p>Create the Matter OTA file from the bootable image file</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./src/app/ota_image_tool.py<span class="w"> </span>create<span class="w"> </span>-v<span class="w"> </span>0xFFF1<span class="w"> </span>-p<span class="w"> </span>0x8005<span class="w"> </span>-vn<span class="w"> </span><span class="m">2</span><span class="w"> </span>-vs<span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="w"> </span>-da<span class="w"> </span>sha256<span class="w"> </span>m4_image.rps<span class="w"> </span>m4_image.ota
</pre></div>
</div>
</li>
</ul>
</section>
</section>
</section>
</section>
<section id="running-ota-provider">
<h3>Running OTA Provider<a class="headerlink" href="#running-ota-provider" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Locate <strong>ota-provider</strong> terminal and start the Provider app passing to it the path to the Matter OTA file created in the previous step:</p></li>
<li><p>In a terminal start the Provider app and pass to it the path to the Matter
OTA file created in the previous step:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>rm<span class="w"> </span>-r<span class="w"> </span>/tmp/chip_kvs_provider
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./out/chip-ota-provider-app<span class="w">  </span>--KVS<span class="w"> </span>/tmp/chip_kvs_provider<span class="w"> </span>-f<span class="w"> </span>chip-efr32-lighting-example.ota
</pre></div>
</div>
</li>
</ul>
</section>
<section id="setting-up-ota-requestor">
<h3>Setting up OTA-Requestor<a class="headerlink" href="#setting-up-ota-requestor" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Before running <strong>ota-requestor</strong> app flash the bootloader binary images for Silicon Labs Devices.</p></li>
</ul>
<section id="flash-bootloader-images">
<h4>Flash Bootloader Images<a class="headerlink" href="#flash-bootloader-images" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Bootloader binaries will be flashed using Simplicity Commander only. It will support EFR32 NCP Boards only.</p></li>
<li><p>Silicon Labs Devices will supports below Bootloader variants for EFR32 Boards.</p>
<ul>
<li><p>Internal Storage Bootloader</p></li>
<li><p>External Storage Bootloader</p></li>
</ul>
</li>
<li><p>To Flash the Bootloader Binary along with the application for Silicon Labs Device, refer <a class="reference internal" href="FLASHING_USING_COMMANDER.html"><span class="std std-doc">Flashing Binaries</span></a></p></li>
</ul>
</section>
</section>
<section id="running-ota-requestor">
<h3>Running OTA-Requestor<a class="headerlink" href="#running-ota-requestor" title="Permalink to this heading"></a></h3>
<ul>
<li><p>In a separate terminal run the chip-tool commands to provision the Provider:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./out/chip-tool<span class="w"> </span>pairing<span class="w"> </span>onnetwork<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">20202021</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./out/chip-tool<span class="w"> </span>accesscontrol<span class="w"> </span>write<span class="w"> </span>acl<span class="w"> </span><span class="s1">&#39;[{&quot;fabricIndex&quot;: 1, &quot;privilege&quot;: 5, &quot;authMode&quot;: 2, &quot;subjects&quot;: [112233], &quot;targets&quot;: null}, {&quot;fabricIndex&quot;: 1, &quot;privilege&quot;: 3, &quot;authMode&quot;: 2, &quot;subjects&quot;: null, &quot;targets&quot;: null}]&#39;</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</li>
<li><p>For Matter over OpenThread, bring up the OpenThread Border Router and get its operational
dataset, for Matter over WiFi bring up the AP.</p></li>
<li><p>If the application device had been previously commissioned, hold Button 0
for six seconds to factory-reset the device.</p></li>
<li><p>Commission the device.
For Matter over OpenThread:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./out/chip-tool<span class="w"> </span>pairing<span class="w"> </span>ble-thread<span class="w"> </span><span class="m">2</span><span class="w"> </span>hex:&lt;operationalDataset&gt;<span class="w"> </span><span class="m">20202021</span><span class="w"> </span><span class="m">3840</span>
</pre></div>
</div>
<p>where operationalDataset is obtained from the OpenThread Border Router.</p>
<p>For Matter over WiFi:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>./out/chip-tool<span class="w"> </span>pairing<span class="w"> </span>ble-wifi<span class="w"> </span><span class="s2">&quot;node_id&quot;</span><span class="w"> </span><span class="s2">&quot;SSID&quot;</span><span class="w"> </span><span class="s2">&quot;PSK&quot;</span><span class="w"> </span><span class="m">20202021</span><span class="w"> </span><span class="m">3840</span>
</pre></div>
</div>
</li>
<li><p>Once the commissioning process completes enter:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./out/chip-tool<span class="w"> </span>otasoftwareupdaterequestor<span class="w"> </span>announce-otaprovider<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</li>
<li><p>The application device will connect to the Provider and start the image download. Once the image is downloaded the device will reboot into the downloaded image.</p></li>
</ul>
</section>
</section>
<section id="multi-chip-ota-images">
<h2>Multi-Chip OTA Images<a class="headerlink" href="#multi-chip-ota-images" title="Permalink to this heading"></a></h2>
<p>Multi-Chip OTA is implemented only for EFR32 devices. Multi-chip OTA uses an enhanced ota_image_tool.py script which creates .ota files that contain additional TLV headers. These TLV headers describe the binaries to be sent over the air. The enhanced script is located at scripts/tool/silabs/ota/ota_image_tool.py which is a wrapper to the original src/app/ota_image_tool.py. Multiple binaries can be packaged in the .ota file. Some Tags are reserved for specific Silicon Labs binaries, and other Tags are available to be used for arbitrary TLVs. The payloads can be encrypted.</p>
<p>For more information on creating a Multi-Chip .ota file see the
<a class="reference external" href="https://github.com/SiliconLabs/matter/blob/latest/scripts/tools/silabs/ota/README.md">README.md</a></p>
<p>OTA-A applications must be built with an additional gn argument to enable them to process the TLVs.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```shell
$ ./scripts/examples/gn_silabs_example.sh examples/lighting-app/silabs/ out/lighting-app BRD41xx chip_enable_multi_ota_requestor=true
```
</pre></div>
</div>
<p>chip_enable_multi_ota_encryption=true should be added to the build command if the requestor is meant to process encrypted payloads.</p>
</section>
<section id="additional-info">
<h2>Additional Info<a class="headerlink" href="#additional-info" title="Permalink to this heading"></a></h2>
<p>Developers can find more resources on
<a class="reference external" href="https://community.silabs.com/s/article/connected-home-over-ip-chip-faq?language=en_US">Silicon Labs Matter Community Page</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer>
    <hr/>
    <p>Copyright © 2025 Silicon Laboratories. All rights reserved.</p>
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>